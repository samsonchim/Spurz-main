<!DOCTYPE html>
<html lang="en">
<head>
	
	<!-- Title -->
	<title>Spurz: Buy and Sale, Cheap</title>

	<!-- Meta -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, minimal-ui, viewport-fit=cover">
	<meta name="theme-color" content="#453ac3">
	<meta name="author" content="DexignZone">
	<meta name="robots" content="index, follow"> 
	<meta name="keywords" content="android, ios, mobile, application template, progressive web app, ui kit, multiple color, dark layout">
	<meta name="description" content="Revolutionize your online store with our Ecommerce App Template. Seamless shopping, secure payments, and personalized recommendations for an exceptional user experience">
	<meta property="og:title" content="Spurz: Buy Cheap">
	<meta property="og:description" content="Revolutionize your online store with our Ecommerce App Template. Seamless shopping, secure payments, and personalized recommendations for an exceptional user experience.">
	<meta property="og:image" content="assets/this.jpg">
	<meta name="format-detection" content="telephone=no">

	<!-- Favicons Icon -->
	<link rel="shortcut icon" type="image/x-icon" href="assets/images/favicon.png">
	
	<!-- PWA Version -->
	<link rel="manifest" href="manifest.json">
    
    <!-- Global CSS -->
	<link href="assets/vendor/bootstrap-select/dist/css/bootstrap-select.min.css" rel="stylesheet">
	<link rel="stylesheet" href="assets/vendor/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.min.css">
	<link rel="stylesheet" href="assets/vendor/swiper/swiper-bundle.min.css">
    
	<!-- Stylesheets -->
    <link rel="stylesheet" class="main-css" type="text/css" href="assets/css/style.css">
	
    <!-- Google Fonts -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700;800&family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">


	
</head>   
<body>
<div class="page-wrapper">
    
	<!-- Preloader -->
	<div id="preloader">
		<div class="loader">
			<div class="cart"></div><div></div></div>
		</div>
	</div> 
    <!-- Preloader end-->
	
	<!-- Header -->
		<header class="header header-fixed">
			<div class="container">
				<div class="header-content">
					<div class="left-content">
						<a href="javascript:void(0);" class="back-btn">
							<i class="icon feather icon-chevron-left"></i>
						</a>
						<h6 class="title">Home Products</h6>
					</div>
					<div class="mid-content">
					</div>
					<div class="right-content">
					</div>
				</div>
			</div>
		</header>
	<!-- Header -->
	
	
	<!-- Page Content Start -->	
<div class="page-content space-top">
    <div class="container p-0">
        <div class="dz-tab style-1 tab-fixed">
            <div class="tab-slide-effect">
                <ul class="nav nav-tabs" id="myTab2" role="tablist">
                    <li class="tab-active-indicator" style="width: 90.7188px; transform: translateX(0px);"></li>
                    <li class="nav-item active" role="presentation">
                        <button class="nav-link active" id="home-tab2" data-bs-toggle="tab" data-bs-target="#home-tab-pane2" type="button" role="tab" aria-controls="home-tab-pane2" aria-selected="true">Popular</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="profile-tab2" data-bs-toggle="tab" data-bs-target="#profile-tab-pane2" type="button" role="tab" aria-controls="profile-tab-pane2" aria-selected="false">Best Products</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="contact-tab2" data-bs-toggle="tab" data-bs-target="#contact-tab-pane2" type="button" role="tab" aria-controls="contact-tab-pane2" aria-selected="false">Flash Sale</button>
                    </li>
                </ul>
            </div>
            <div class="tab-content" id="myTabContent2">
                <div class="tab-pane fade active show" id="home-tab-pane2" role="tabpanel" aria-labelledby="home-tab2" tabindex="0">
                    <!-- Products will be inserted here -->
                </div>
                <div class="tab-pane fade" id="profile-tab-pane2" role="tabpanel" aria-labelledby="profile-tab2" tabindex="0">
                    <!-- Products will be inserted here -->
                </div>
                <div class="tab-pane fade" id="contact-tab-pane2" role="tabpanel" aria-labelledby="contact-tab2" tabindex="0">
                    <!-- Products will be inserted here -->
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Page Content End -->

<!--**********************************
    Scripts
***********************************-->
<script>
	document.addEventListener('DOMContentLoaded', function() {
    function fetchProducts() {
        const xhr = new XMLHttpRequest();
        xhr.open('GET', 'php/home-products.php', true);
        xhr.onload = function() {
            if (this.status === 200) {
                try {
                    const products = JSON.parse(this.responseText);
                    displayProducts(products);
                } catch (error) {
                    console.error('Error parsing JSON:', error);
                }
            } else {
                console.error('Failed to fetch products. Status:', this.status);
            }
        };
        xhr.onerror = function() {
            console.error('Request error.');
        };
        xhr.send();
    }

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    function displayProducts(products) {
        const homeTabPane = document.getElementById('home-tab-pane2');
        const profileTabPane = document.getElementById('profile-tab-pane2');
        const contactTabPane = document.getElementById('contact-tab-pane2');
        
        if (!homeTabPane || !profileTabPane || !contactTabPane) {
            console.error('One or more tab panes are missing.');
            return;
        }
        
        homeTabPane.innerHTML = '';
        profileTabPane.innerHTML = '';
        contactTabPane.innerHTML = '';
        
        // Display products in the home tab
        products.forEach(product => {
            const productHtml = createProductHtml(product);
            homeTabPane.innerHTML += productHtml;
        });

        // Shuffle and display products in the profile tab
        const shuffledProfileProducts = shuffleArray([...products]);
        shuffledProfileProducts.forEach(product => {
            const productHtml = createProductHtml(product);
            profileTabPane.innerHTML += productHtml;
        });

        // Shuffle and display products in the contact tab
        const shuffledContactProducts = shuffleArray([...products]);
        shuffledContactProducts.forEach(product => {
            const productHtml = createProductHtml(product);
            contactTabPane.innerHTML += productHtml;
        });
    }

    function createProductHtml(product) {
        return `
            <div class="col-12">
                <div class="product-list">
                    <div class="dz-media">
                        <img src="${product.image}" alt="">
                        <a href="javascript:void(0);" class="item-bookmark">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-heart"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>
                        </a>
                    </div>
                    <div class="product-content">
                        <div class="dz-review-meta mb-1">
                            <h6 class="review">4.0<i class="fa-solid fa-star ms-1"></i><span>...</span></h6>
                        </div>
                        <h6 class="title font-14"><a href="product-detail.php?id=${product.product_id}">${product.product_name}</a></h6>
                        <div class="product-footer">
                            <h5 class="price mb-0">₦${product.price}<del>₦${(product.price * 1.2).toFixed(2)}</del></h5>
                            <small>45%OFF</small>
                        </div>
                    </div>
                </div>
            </div>
        `;
    }

    fetchProducts();
});
</script>

<script src="assets/js/jquery.js"></script>
<script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="assets/vendor/swiper/swiper-bundle.min.js"></script><!-- Swiper -->
<script src="assets/vendor/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.min.js"></script><!-- Swiper -->
<script src="assets/js/dz.carousel.js"></script><!-- Swiper -->
<script src="assets/js/settings.js"></script>
<script src="assets/js/custom.js"></script>
</body>

</html>